<?php

namespace AppBundle\Repository;

/**
 * ItemRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class ItemRepository extends \Doctrine\ORM\EntityRepository
{

    public function findByShop($shop){

        $qb = $this->createQueryBuilder('i');
        $qb = $qb->leftJoin('i.rack', 'r')
            ->leftJoin('r.shop', 's')
            ->where('s.id =:SHOP')
            ->setParameter('SHOP',$shop->getId());
        $result = $qb->getQuery()->getResult();

        return $result;

    }


}
